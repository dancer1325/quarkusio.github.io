////
This guide is maintained in the main Quarkus repository
and pull requests should be submitted there:
https://github.com/quarkusio/quarkus/tree/main/docs/src/main/asciidoc
////
= Creating Your First Application
include::_attributes.adoc[]
:categories: getting-started
:summary: Discover how to create your first Quarkus application.
:numbered:
:sectnums:
:sectnumlevels: 4
:topics: getting-started
:imagesdir: images

* goal
    ** how to create a Hello World Quarkus app / Jakarta REST endpoint
    ** Injecting beans
    ** Functional tests
    ** Packaging of the application

== Prerequisites

:prerequisites-no-graalvm:
include::{includes}/prerequisites.adoc[]

== Architecture

image::getting-started-architecture.png[]

== Solution

* link:{quickstarts-tree-url}/getting-started[here]

== Basic Concepts

* JVM mode vs Native mode
    ** JVM mode
        *** allows you,
            **** develop,
            **** package
            **** run classic JAR applications
        *** Reason: ðŸ§ Quarkus == Java framework ðŸ§ 
    ** https://graalvm.org/[GraalVM]
        *** allows you,
            **** compile your Java application -- into -- machine specific code (== Go or C++)

* AoT (Ahead of Time Compilation)
** == compile Java bytecode -- into a -- NATIVE system-specific machine code

* | classic Java frameworks,
    ** build time
        *** == ALL actions /
            **** applied | your Java source files -- to convert them into -- something runnable (class files, jar/war, native images)
        *** == compilation + annotation processing + bytecode generation + etc.
    ** runtime
        *** == ALL actions / happen | execute your application (== bootstrap)
        *** -- relies on a -- lot of technical actions
            **** _Examples:_
                ***** loading libraries & configuration files,
                ***** scanning the application's classpath -- to -- find
                    ****** configurations,
                    ****** entity definitions,
                    ****** dependency injection binding
                ***** configuring the dependency injection,
                ***** setting up your Object-Relational Mapping,
                ***** instantiating your REST controllers
                    ****** -- through -- reflection
    ** âš ï¸MAIN problems âš ï¸
        *** delay the readiness of your application
            **** == | serve a business request, need to wait a couple of seconds BEFORE
        *** if you have a peak of resource consumption | bootstrap -> you will need to size the needed resources -- based on -- your technical bootstrap needs

== Bootstrapping the project

MULTIPLE ways

:create-app-artifact-id: getting-started
:create-app-extensions: rest
:create-app-code:
include::{includes}/devtools/create-app.adoc[]

* Quarkus BOM
    ** allows
        *** omit MULTIPLE Quarkus dependencies

* `quarkus-maven-plugin` OR Quarkus Gradle plugin
    ** responsible for
        *** packaging the application
        *** providing the development mode

* `io.quarkus:quarkus-rest`
    ** dependency / allow developing REST applications
+
[source,xml,role="primary asciidoc-tabs-target-sync-cli asciidoc-tabs-target-sync-maven"]
.pom.xml
----
<dependency>
    <groupId>io.quarkus</groupId>
    <artifactId>quarkus-rest</artifactId>
</dependency>
----
+
[source,gradle,role="secondary asciidoc-tabs-target-sync-gradle"]
.build.gradle
----
implementation("io.quarkus:quarkus-rest")
----

== Quarkus REST resources vs Jakarta REST resources

* âŒNO need to create an `Application` classâŒ
* 1! resource instance
    ** âš ï¸!= 1 resource instance / requestâš ï¸
    ** if you want to configure it -> use `*Scoped` annotations (`ApplicationScoped`, `RequestScoped`, etc)

== Running the application

include::{includes}/devtools/dev.adoc[]

== Using injection

* Quarkus' dependency injection
    ** link:cdi.adoc[-- based on -- Arc]

* ArC
    ** inherit -- from -- `quarkus-rest`

include::{includes}/devtools/dev.adoc[]

== Development Mode -- `quarkus:dev` --
* enables
    ** live reload + background compilation
        *** == if you modify your Java files &/OR your resource files & refresh your browser -> these changes AUTOMATICALLY take effect
            **** Reason to refresh the browser: ðŸ§  triggers a scan of the workspaceðŸ§ 
        *** == application is redeployed
        *** if there are any issues about compilation or deployment -> error page
    ** listen for a debugger | port `5005`
        *** == ðŸ‘€enables JVM debug modeðŸ‘€
* `-Dsuspend`
    ** BEFORE executing any code, waits for attaching the debugger
* `-Ddebug=false`
    ** if you do NOT want the debugger

== Testing

* steps
    ** add the dependencies
        *** | pom.xml
+
[source,xml,role="primary asciidoc-tabs-target-sync-cli asciidoc-tabs-target-sync-maven"]
.pom.xml
----
<dependency>
    <groupId>io.quarkus</groupId>
    <artifactId>quarkus-junit5</artifactId>
    <scope>test</scope>
</dependency>
<dependency>
    <groupId>io.rest-assured</groupId>
    <artifactId>rest-assured</artifactId>
    <scope>test</scope>
</dependency>
----
        *** | build.gradle
+
[source,gradle,role="secondary asciidoc-tabs-target-sync-gradle"]
.build.gradle
----
testImplementation("io.quarkus:quarkus-junit5")
testImplementation("io.rest-assured:rest-assured")
----

* https://maven.apache.org/surefire/maven-surefire-plugin/[Surefire Maven Plugin]
    ** requirements
        *** set the `<version>`
            **** Reason:ðŸ§ default version does NOT support JUnit 5ðŸ§ 
+
[source,xml,subs=attributes+]
----
<plugin>
    <artifactId>maven-surefire-plugin</artifactId>
    <version>${surefire-plugin.version}</version>
    <configuration>
       <systemPropertyVariables>
          <java.util.logging.manager>org.jboss.logmanager.LogManager</java.util.logging.manager>
          <maven.home>${maven.home}</maven.home>
       </systemPropertyVariables>
    </configuration>
</plugin>
----

        *** set `<java.util.logging>` system property
            **** Reason: ðŸ§ make sure tests will use the correct log managerðŸ§ 
        *** set `<maven.home>`
            **** Reason:ðŸ§ ensure apply custom configuration -- from -- `${maven.home}/conf/settings.xml` ðŸ§ 

* `./mvnw test`
    ** run tests
        *** by default | port "8081"

* `./mvnw test -Dtest=TestClassName`
    ** run 1! specific test

* clients for testing
    ** RestAssured
        *** default one
    ** ðŸ‘€`@TestHTTPResource` | tested application's URL -- through -- test class's fieldðŸ‘€
        *** 's ALLOWED types
            **** `String`,
            **** `URL`
            **** `URI`

* `quarkus.http.test-port`
    ** == config property /
        *** set the test port

* `test.url`
    ** == system property /
        *** created by Quarkus
        *** == base test URL | your test application is running
    ** use cases
        *** you can NOT use injection

== Working -- with -- multi-module project OR external modules

* Quarkus' build time
    ** ðŸ‘€discover >1 classes OR annotations -- via -- https://github.com/smallrye/jandex[Jandex]ðŸ‘€
        *** _Example:_ CDI bean discovery

* TODO:
This index is created by default on the project on which Quarkus is configured for, thanks to our Maven and Gradle plugins.

However, when working with a multi-module project, be sure to read the `Working with multi-module projects` section of the
xref:maven-tooling.adoc#multi-module-maven[Maven] or xref:gradle-tooling.adoc#multi-module-gradle[Gradle] guides.

If you plan to use external modules (for example, an external library for all your domain objects),
you will need to make these modules known to the indexing process either by adding the Jandex plugin (if you can modify them)
or via the `quarkus.index-dependency` property inside your `application.properties` (useful in cases where you can't modify the module).

* xref:cdi-reference.adoc#bean_discovery[MORE]

== Packaging and run the application

The application is packaged using:

include::{includes}/devtools/build.adoc[]

It produces several outputs in `/target`:

* `getting-started-1.0.0-SNAPSHOT.jar` - containing just the classes and resources of the projects, it's the regular
artifact produced by the Maven build - it is *not* the runnable jar;
* the `quarkus-app` directory which contains the `quarkus-run.jar` jar file - being an executable _jar_. Be aware that it's not an _Ã¼ber-jar_ as
the dependencies are copied into subdirectories of `quarkus-app/lib/`.

You can run the application using: `java -jar target/quarkus-app/quarkus-run.jar`

NOTE: If you want to deploy your application somewhere (typically in a container), you need to deploy the whole `quarkus-app` directory.

NOTE: Before running the application, don't forget to stop the hot reload mode (hit `CTRL+C`), or you will have a port conflict.

[[banner]]
== Configuring the banner

By default, when a Quarkus application starts (in regular or dev mode), it will display an ASCII art banner. The banner can be disabled by setting `quarkus.banner.enabled=false` in `application.properties`,
by setting the `-Dquarkus.banner.enabled=false` Java System Property, or by setting the `QUARKUS_BANNER_ENABLED` environment variable to `false`.
Furthermore, users can supply a custom banner by placing the banner file in `src/main/resources` and configuring `quarkus.banner.path=name-of-file` in `application.properties`.

== Non Application endpoints

Various Quarkus extensions contribute non-application endpoints that provide different kinds of information about the application.
Examples of such extensions are the xref:smallrye-health.adoc[health], xref:telemetry-micrometer.adoc[metrics], xref:openapi-swaggerui.adoc[OpenAPI] and info extensions.

These non application endpoints are normally accessible under the `/q` prefix like so:

* `/q/health`
* `/q/metrics`
* `/q/openapi`
* `/q/info`

but users can also choose to expose one that might present a security risk under a different TCP port using a dedicated xref:management-interface-reference.adoc[management interface].

=== Info endpoint

If the application contains the `quarkus-info` extension, then Quarkus will by default expose the `/q/info` endpoint which provides information about the build, java version, version control, and operating system. The level of detail of the exposed information is configurable.

All CDI beans implementing the `InfoContributor` will be picked up and their data will be appended to the endpoint.

==== Configuration Reference

include::{generated-dir}/config/quarkus-info.adoc[opts=optional, leveloffset=+2]

== What's next?

We recommend continuing the journey by creating xref:getting-started-dev-services.adoc[your second Quarkus application], with Dev Services and persistence.
You can learn about creating a native executable and packaging it in a container with the xref:building-native-image.adoc[building a native executable guide].
If you are interested in reactive, we recommend the xref:getting-started-reactive.adoc[getting started with reactive guide], where you can see how to implement reactive applications with Quarkus.

In addition, the xref:tooling.adoc[tooling guide] document explains how to:

* scaffold a project in a single command line
* enable the _development mode_ (hot reload)
* import the project in your favorite IDE
* and more
